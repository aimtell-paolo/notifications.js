!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Notifications=t()}(this,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}function t(e,t){n.apply(void 0,[e,t].concat(a))}function n(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;n>s;s++)i[s-2]=arguments[s];i.forEach(function(n){return e.addEventListener(n,t)})}var i={};i.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},i.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),i.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};var s=e(function(e){function t(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function n(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;10>n;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==i.join(""))return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(e){s[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},s)).join("")}catch(o){return!1}}var i=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;e.exports=n()?Object.assign:function(e,n){for(var o,a,r=t(e),c=1;c<arguments.length;c++){o=Object(arguments[c]);for(var l in o)i.call(o,l)&&(r[l]=o[l]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(o);for(var f=0;f<a.length;f++)s.call(o,a[f])&&(r[a[f]]=o[a[f]])}}return r}}),o=s&&"object"==typeof s&&"default"in s?s["default"]:s,a=["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"],r=0,c=function(){function e(t){var n=t.text,s=t.target,o=t.template,a=t.notificationClasses,c=t.animations,l=t.onClose,f=void 0===l?function(){}:l,u=t.closeAfter,h=t.shouldRender;i.classCallCheck(this,e),this.rendered=!1,this.removed=!1,this.target=s,this.onClose=f,this.closeAfter=u,this.animations=c,this.notificationClasses=a,this.text=n,this.index=r++,this.shouldRender=h,this.element=this.makeElement({template:o,notificationClasses:a,animations:c,text:n,index:this.index})}return i.createClass(e,[{key:"makeElement",value:function(e){var t,n=e.template,s=e.notificationClasses,o=e.animations,a=e.text,r=e.index,c=document.createElement("div");return c.setAttribute("data-notifications-index",r),(t=c.classList).add.apply(t,i.toConsumableArray(s)),this.animations.on&&c.classList.add("animated",o.animateInClasses),c.innerHTML=n({text:a}),c}},{key:"bindOnClose",value:function(){var e=this,t=document.querySelector('[data-notifications-index="'+this.index+'"] [data-notifications-close]');t.addEventListener("click",function(t){t.preventDefault(),e.remove(),e.onClose()})}},{key:"render",value:function(){var e=this;this.rendered===!1&&(this.shouldRender&&(this.target.insertBefore(this.element,this.target.firstChild),this.rendered=!0,this.bindOnClose()),0!==this.closeAfter&&setTimeout(function(){e.remove(),e.onClose()},this.closeAfter))}},{key:"remove",value:function(){var e=this;if(!this.removed&&this.shouldRender){var n;t(this.element,function(){e.removed||e.target.removeChild(e.element),e.removed=!0}),(n=this.element.classList).add.apply(n,i.toConsumableArray(this.animations.animateOutClasses))}}}]),e}(),l=function(e){var t=e.text;return"\n  <div>\n    "+t+'\n\n    <button class="notification__close" data-notifications-close>&times;</button>\n  </div>\n  '},f={targetDOMElement:"#notifications",closeAfter:5e3,notificationClasses:["notification"],animations:{on:!0,animateInClasses:["fadeIn"],animateOutClasses:["fadeOut"]},onClose:function(){},onShow:function(){},onNewMessage:function(){},pusher:{instance:null,channelName:"",eventName:"",transform:function(){return"Configure `pusher.transform`"}},template:l,shouldRender:!0},u=function(){function e(t){if(i.classCallCheck(this,e),this.config=o({},f,t),this.messages=[],this.targetElement=document.querySelector(this.config.targetDOMElement),!this.targetElement&&this.config.shouldRender)throw new Error("Element with selector "+this.config.targetDOMElement+" was not found");this.templateFn=this.config.template,this.config.pusher.instance&&this.bindPusher(this.config.pusher)}return i.createClass(e,[{key:"bindPusher",value:function(e){var t=this,n=e.instance,i=e.channelName,s=e.eventName,o=e.transform,a=n.subscribe(i);a.bind(s,function(e){t.createNewMessage(o(e))})}},{key:"createNewMessage",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=new c({text:e,target:this.targetElement,template:this.templateFn,notificationClasses:[].concat(i.toConsumableArray(this.config.notificationClasses),i.toConsumableArray(t)),onClose:this.config.onClose,closeAfter:this.config.closeAfter,animations:this.config.animations,shouldRender:this.config.shouldRender});this.messages.push(n),this.config.onNewMessage(n),n.render(),this.config.onShow(n)}},{key:"getMessages",value:function(){return this.messages}},{key:"push",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=t.classes,i=void 0===n?[]:n;this.createNewMessage(e,i)}}]),e}();return u});